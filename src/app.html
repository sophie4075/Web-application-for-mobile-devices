<!DOCTYPE html>
<html lang="en" manifest="offline.manifest">
<head>
    <meta charset="UTF-8">
    <title>MWF DEMO</title>
    <!-- this tag avoids scaling the view on display -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1"/>
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- for pwa, we may include the manifest
    <link rel="manifest" href="pwa/webapp-manifest.json"> -->
    <!-- framework + application style (shown by the IDE as not available as the file will be generated by the build process
         and placed next to the copy of this file in the dist directory -->
    <link rel="stylesheet" href="app-style.bundle.min.css"/>
    <!-- TODO: comment-in if mapviews shall be used. It seems that libs and css need to be accessed online rather than be provided locally, there is also some issue when using leaflet+offline manifest...
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
          integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
          crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
            integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
            crossorigin=""></script> -->
    <!-- framework + application js resources (also shown as not available, see above) -->
    <script type="module" src="app-js.bundle.min.js"></script>
</head>
<!-- TODO: change the application name if it is modified -->
<body data-mwf-application="MyApplication" class="mwf-loading-app">

<!-- TODO-REPEATED: add new views here -->
<div class="mwf-view mwf-view-initial" id="mediaOverview" data-mwf-viewcontroller="ListviewViewController">
    <header>
        <button class="mwf-imgbutton mwf-img-sandwich mwf-left-align"></button>
        <h1 class="mwf-left-align">Medien</h1>
        <button class="mwf-imgbutton mwf-img-plus mwf-right-align" id="addNewMediaItem"></button>
    </header>
    <main class="mwf-scrollview">
        <ul class="mwf-listview" data-mwf-listitem-view="myapp-listitem" data-mwf-listitem-menu="mediaItemMenu">
            <li class="mwf-listitem mwf-li-title-subtitle mwf-template mwf-databind"
                data-mwf-templatename="myapp-listitem" data-mwf-targetview="mediaReadview">
                {{#if mediaType == 'video'}}
                <div class="videoButtonConatiner">
                <video type="{{item.contentType}}" class="mwf-left-align" src="{{src}}#t=0.1" preload="metadata"></video>
                <button class="mwf-imgbutton mwf-img-play videobutton"></button>
                </div>
                {{else}}
                <img src="{{src}}" class="mwf-left-align" alt="Bildvorschau">
                {{/if}}
                <div class="mwf-li-titleblock">
                    <h2>{{title}}{{_id}}</h2>
                    <h3>{{addedDateString}}</h3>
                </div>
                <button class="mwf-imgbutton mwf-img-options-vertical mwf-right-align mwf-listitem-menu-control">
                </button>
            </li>
        </ul>
    </main>
    <footer>
        <button class="mwf-imgbutton mwf-img-refresh mwf-right-align"></button>
    </footer>
</div>
<div data-mwf-templatename="mediaItemMenu" class="mwf-listitem-menu mwf-template mwf-databind mwf-dialog mwf-popup">
    <header>
        <h2 class="mwf-dyncontent">{{title}}{{_id}}</h2>
    </header>
    <main>
        <ul>
            <li class="mwf-li-singletitle mwf-menu-item" data-mwf-targetaction="showMediaItemDialog">
                Titel Editieren
            </li>
            <li class="mwf-li-singletitle mwf-menu-item" data-mwf-targetview="editView">
                Details Editieren
            </li>
            <li class="mwf-li-singletitle mwf-menu-item" data-mwf-targetaction="cloneItem">
                Kopieren
            </li>
            <li class="mwf-li-singletitle mwf-menu-item" data-mwf-targetaction="showDeleteConfirmationDialog">
                Löschen
            </li>
        </ul>
    </main>
</div>
<div class="mwf-dialog mwf-popup mwf-template mwf-databind mwf-view-component" data-mwf-templatename="mediaItemDialog"
     data-mwf-viewcontroller='GenericDialogTemplateViewController'>
    <main>
        <h2>{{#if item.created}}
            Medium editieren
            {{else}}
            Neues Medium
            {{/if}}
        </h2>
        <form id="itemEditForm" on-submit="submitForm">
            <input name="title" autocomplete="off" class="mwf-autofocus" type="text" placeholder="Titel"
                   required="required" value="{{item.title}}"/>
            <div class="mwf-buttonbar">
                <button class="mwf-left-align mwf-button" disabled="{{#unless item.created}}disabled{{/unless}}"
                        type="button" on-click="deleteItem">Löschen
                </button>
                <input class="mwf-button-prio mwf-right-align mwf-button" type="submit"
                       value="{{#if item.created}}Ändern{{else}}Hinzufügen{{/if}}"/>
            </div>
        </form>
    </main>
</div>
<div class="mwf-dialog mwf-popup mwf-template mwf-databind mwf-view-component" data-mwf-templatename="mediaDeleteDialog"
     data-mwf-viewcontroller='GenericDialogTemplateViewController'>
    <main>
        <h2>Medium Löschen
        </h2>
        <p>Möchten Sie das Medium {{item.title}} löschen? </p>
        <form id="deleteForm" on-submit="submitForm">
            <div class="mwf-buttonbar">
                <button class="mwf-right-align mwf-button mwf-button-prio"
                        type="button" on-click="deleteItem">Löschen
                </button>
                <input class="mwf-left-align mwf-button" type="submit"
                       value="Abbrechen"/>
            </div>
        </form>
    </main>
</div>
<div class="mwf-view" id="mediaReadview" data-mwf-viewcontroller='ReadviewViewController'>
    <div class="mwf-template mwf-databind" data-mwf-templatename="mediaReadviewTemplate">
        <header>
            <button class="mwf-imgbutton mwf-img-sandwich mwf-left-align"></button>
            <h1 class="mwf-left-align mwf-dyncontent">{{item.title}}</h1>
            <button class="mwf-imgbutton mwf-img-pencil mwf-right-align" data-mwf-targetview="editView" on-click="editItem"></button>
            <button class="mwf-imgbutton mwf-img-delete mwf-right-align" on-click="deleteItem"></button>
        </header>
        <main class="mwf-scrollview">
            {{#if item.mediaType == 'video'}}
            <video src="{{item.src}}" controls></video>
            {{else}}
            <img src="{{item.src}}"/>
            {{/if}}
            <p>{{item._description}}</p>
        </main>
        <footer>
            <button class="mwf-back mwf-imgbutton mwf-img-backward" on-click="pause"></button>
        </footer>
    </div>
</div>

<div class="mwf-view" id="editView" data-mwf-viewcontroller='EditViewController'>
    <div class="mwf-template mwf-databind" data-mwf-templatename="EditViewTemplate">
        <header>
            <button class="mwf-imgbutton mwf-img-sandwich mwf-left-align"></button>
            <h1 class="mwf-left-align mwf-dyncontent">
                {{#if item.created}}
                Editieren: {{item.title}}
                {{else}}
                Neues Medium
                {{/if}}
            </h1>
            <input class="mwf-imgbutton mwf-img-disk mwf-right-align" form="editForm" type="submit"/>
            <button class="mwf-imgbutton mwf-img-paste mwf-right-align" form="editForm"
                    disabled="{{#unless !item.created}}disabled{{/unless}}" on-click="autoFill"></button>
            <button class="mwf-imgbutton mwf-img-delete mwf-right-align" form="editForm"
                    disabled="{{#unless item.created}}disabled{{/unless}}" on-click="deleteItem"
                    id="deleteFromEditView" data-mwf-targetview="mediaOverview"></button>
        </header>
        <main class="mwf-scrollview">
            <form id="editForm" on-submit="submitForm">
                <fieldset class="mwf-material">
                    <legend>URL</legend>
                    <input name="src" class="mwf-material-altinput-target" autocomplete="off" class="mwf-autofocus" type="url" id="mediaURL" required="required"  value="{{#if item.created}}{{item.src}}{{/if}}"/>
                    <input id="myapp-mediaMediaViewFormFileinput" type="file" accept="image/*,video/*" name="srcimg" class="mwf-material-altinput" disabled />
                    <label for="myapp-mediaMediaViewFormFileinput" class="mwf-material-altinput mwf-imgbutton mwf-img-camera oos" id="disabledFileUpload"></label>
                </fieldset >
                {{#if item.mediaType == 'video'}}
                {{#if item.created}}<video type="{{item.contentType}}" id="createdVid" src="{{item.src}}" controls ></video>{{else}}<video src="{{item.src}}" id="videoPreview" type="{{item.contentType}}" controls></video>{{/if}}
                {{else}}
                {{#if item.created}}<img src="{{item.src}}" alt="Bildvorschau" id="createdImg">{{else}}<img id="imagePreview" src="" alt="Bildvorschau">{{/if}}
                {{/if}}
                <fieldset class="mwf-material">
                    <legend>Titel</legend>
                    <input name="title" autocomplete="off" type="text"
                           value="{{#if item.created}}{{item.title}}{{else}}{{/if}}" required="required"
                           required="required"/>
                </fieldset>
                <fieldset class="mwf-material">
                    <legend>Beschreibung</legend>
                    <textarea name="_description" autocomplete="off" type="text">{{#if item.created}}{{item._description}}{{/if}}</textarea>
                </fieldset>

            </form>
        </main>
        <footer>
            <button class="mwf-back mwf-imgbutton mwf-img-backward"  on-click="pause"></button>
        </footer>
    </div>
</div>
</body>
</html>
